/// 切换主题
///-----------------------------------------------------
$themes: (
  light: (
    bgColor: #fff,
    textColor: #000,
  ),
  dark: (
    bgColor: #000,
    textColor: #fff,
  )
);

// 定义全局theme变量, 用于useTheme中收集依赖
$currentTheme: light;
@mixin useTheme() {
  @each $key, $value in $themes {
    $currentTheme: $key !global; // 指向全局currentTheme, 否则为局部变量
    html[data-theme="#{$key}"] & {
      @content;
    }
  }
}

@function getVar($key) {
  $themeMap: map-get($map: $themes, $key: $currentTheme); // 获取遍历的当前主题
  @return map-get($themeMap, $key);
}

/// example
///-----------------------------------------------------
.button{
  width: 100px;
  height: 40px;

  @include useTheme {
    background-color: getVar(bgColor);
    color: getVar(textColor);
  }
}